{% extends 'base.html' %}
{% load humanize %}
{% block content %}
    <section class="profile">
        <h1>Profile</h1>
        <article class="profile-info">
            <h3>{{ user.first_name }} {{ user.last_name }}</h3>
            <div class="stats">
                <a href="{% url 'following_list' user.profile.pk %}" class="following_stat">
                    <h3>Following</h3>
                    {{ user.profile.following.all|length}}
                </a>
                <a href="{% url 'followers_list' user.profile.pk %}" class="followers_stat">
                    <h3>Followers</h3>
                    {{ user.profile.followers.all|length}}
                </a>
                <div class="feed_stat">
                    <h3>Post</h3>
                    {{ user.feeds.all|length}}
                </div>
                 {% if request.user != user %}
                    <a href="{% url 'follow' user.profile.pk %}" class="follow">
                        {% if request.user.profile in user.profile.followers.all %}
                            Unfollow
                        {% else %}
                            Follow
                        {% endif %}
                    </a>
                {% endif %}
            </div>
           
        </article>
        <article class="profile-feeds">
            {% for feed  in feeds %}
                <div class="feed">
                    {% comment %} <a href="{% url 'feed:feed_detail' feed.pk %}">{{ feed }}</a> {% endcomment %}
                    <header class="feed-header">
                        <a href="{% url 'profile' feed.user.pk %}" class="feed-user">{{ feed.user }}</a>
                        <span class="feed-date">{{ feed.created | naturaltime }}</span>
                    </header>
                    <div class="feed-body">
                        <p>{{ feed.content }}</p>
                    </div>
                    <footer class="feed-footer">
                     
                        <span class="feed-likes">
                            <span class="feed-like-number">{{ feed.likes.all | length}}</span>
                            <span>like{{ feed.likes.count| pluralize}}</span>
    
                            {% comment %} <a href="{% url 'feed:comment_feed' feed.pk %}" class="feed-comment-icon">üìù</a> {% endcomment %}
                            <span class="feed-comment-number">{{ feed.comments.all | length}}</span>
                            <span>comment{{ feed.comments.count| pluralize}}</span>
                            <a href="{% url 'feed:feed_detail' feed.pk %}" class="btn">View</a>
                        </span>
                    </footer>
                </div>
            {% empty %}
                {% if request.user == user.user %}
                
                <p class="no-feeds">You haven't posted anything yet.</p>
                {% else %}
                <p class="no-feeds">{{ user.username }} hasn't posted anything yet.</p>
                {% endif %}
            {% endfor %}
        </article>
    </section>
{% endblock content %}